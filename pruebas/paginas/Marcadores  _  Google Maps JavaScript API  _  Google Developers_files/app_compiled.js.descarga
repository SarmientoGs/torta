for(var f="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba=function(){ba=function(){};f.Symbol||(f.Symbol=ca)},da=0,ca=function(a){return"jscomp_symbol_"+(a||"")+da++},l=function(){ba();var a=f.Symbol.iterator;a||(a=f.Symbol.iterator=
f.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ea(this)}});l=function(){}},ea=function(a){var b=0;return fa(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},fa=function(a){l();a={next:a};a[f.Symbol.iterator]=function(){return this};return a},ga=function(a,b){l();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,
value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d},m=f,n=["Array","prototype","keys"],p=0;p<n.length-1;p++){var q=n[p];q in m||(m[q]={});m=m[q]}var ha=n[n.length-1],r=m[ha],t=r?r:function(){return ga(this,function(a){return a})};t!=r&&null!=t&&aa(m,ha,{configurable:!0,writable:!0,value:t});
var ia=this,u=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},v=function(a){return"array"==u(a)},w=function(a){return"string"==typeof a},ja="closure_uid_"+(1E9*Math.random()>>>0),ka=0,x=function(a,b){a=a.split(".");var c=ia;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}:c[d]=b},y=function(a,b){function c(){}c.prototype=b.prototype;a.Ha=b.prototype;a.prototype=new c;a.prototype.constructor=
a;a.Ca=function(a,c,g){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var la=angular.module("henhouse.templates",[]).value("forceCachedTemplates",!1).value("forceUncachedTemplates",!1).factory("html2JsTemplatesCached",["forceCachedTemplates","forceUncachedTemplates",function(a,b){return function(){return!b&&!0}}]).run(["$templateCache","html2JsTemplatesCached",function(a,b){function c(a){return a.replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")}b()&&(a.put("components/api_key_bar/api-key-bar.html",'<div class="api-key-bar" layout="row" layout-align="center center">\n    <div ng-if="::$ctrl.showApiKeyName" class="api-key-bar-display-name" flex="20">\n      {{::$ctrl.key.displayName}}\n    </div>\n    <div class="api-key-bar-api-key" data-test-api-key flex>\n      {{::$ctrl.key.currentKey}}\n    </div>\n    <md-button class="md-icon-button" ng-click="$ctrl.clickToCopyKey()">\n      <md-icon id="hen-copy-icon" class="md-accent md-hue-2">\n        content_copy\n      </md-icon>\n    </md-button>\n  </div>\n</div>\n'),
a.put("components/brand_editor/brand-editor.html",['<hen-header hen-subtitle="'+c("Configure your OAuth client")+'"></hen-header>','<div class="hen-brand-page-content">\n  <div class="hen-loading-page-content" layout="column" ng-if="$ctrl.pageIsLoading">\n    <div flex></div>\n      <div layout="row">\n        <div flex></div>\n          <md-progress-circular md-mode="indeterminate" md-diameter="60"></md-progress-circular>\n        <div flex></div>\n      </div>\n    <div flex></div>\n  </div>\n  <form ng-submit="$ctrl.onComplete()" ng-if="!$ctrl.pageIsLoading">\n    <div class="hen-brand-note">\n      Specify the product name that will be shown on the user consent screen. <a class="hen-link" href="https://developers.google.com/identity/protocols/OAuth2" target="_blank">Learn more</a>\n    </div>\n    <md-input-container md-no-float class="hen-brand">\n      <input required ng-model="$ctrl.brand.displayName"',
'          placeholder="'+c("Product name")+'">','    </md-input-container>\n    <hen-message type="info" class="hen-brand-email-details">\n      An email address is sometimes shown on the user consent screen. We will use <span class="hen-brand-email">{{::$ctrl.email}}</span>. You can edit this later in the <a class="hen-link" href="https://console.developers.google.com" target="_blank">API Console</a>.\n    </hen-message>\n    <div class="hen-button-bar">\n      <div layout="row">\n        <div flex></div>\n        <div>\n          <md-button ng-click="$ctrl.onCancel()">\n            Cancel\n          </md-button>\n          <md-button type="submit" class="md-primary">\n            Next\n          </md-button>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n'].join("\n")),
a.put("components/hen_message/hen-message.html",'<div layout="row" layout-align="center center">\n  <div class=\'hen-message-icon\' flex>\n    <md-icon class="material-icons {{$ctrl.iconDetails.className}}">\n      {{$ctrl.iconDetails.iconName}}\n    </md-icon>\n  </div>\n  <div class="hen-note" ng-transclude flex></div>\n</div>\n'),a.put("components/henhouse_flow/henhouse-flow.html",'  <div ng-if="$ctrl.step.id == \'INTRO\'">\n    <hen-header hen-title="{{$ctrl.getApiTitle()}}">\n      <hen-project-selector on-submit="$ctrl.completeIntro()"></hen-project-selector>\n    </hen-header>\n    <div class="hen-project-page-content" ng-if="!$ctrl.projectLabelIsValid()">\n      <div layout="row" layout-align="center center">\n        <div class="hen-message-icon" flex>\n          <md-icon class="material-icons hen-error-icon">\n            error\n          </md-icon>\n        </div>\n        <div class="hen-note" flex>\n          Project names must be between 4 and 30 characters and may only contain letters, numbers, spaces, and hyphens.\n        </div>\n      </div>\n    </div>\n    <div class="hen-project-page-content" ng-if="!$ctrl.userProbablyHasPermission">\n      <hen-message type="error">\n        You don\'t have permission to manage APIs for this project.<br/> Create or select another project to continue.\n      </hen-message>\n    </div>\n    <div class="hen-project-page-content" ng-if="$ctrl.isTosVisible()">\n      <hen-tos-opt-in is-accepted="$ctrl.tosAccepted"></hen-tos-opt-in>\n    </div>\n    <div class="hen-button-bar">\n      <div layout="row">\n        <div flex></div>\n        <div>\n          <md-button ng-click="$ctrl.cancel()">\n            Cancel\n          </md-button>\n          <md-button ng-click="$ctrl.completeIntro()"\n                     class="md-primary"\n                     ng-disabled="!$ctrl.isValidForFlow()">\n            <span ng-if="$ctrl.projectSelectorDetails.state == \'NEW_PROJECT\'">\n            Create and Enable API\n            </span>\n            <span ng-if="$ctrl.projectSelectorDetails.state == \'EXISTING_PROJECT\'">\n            Enable API\n            </span>\n          </md-button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <hen-brand-editor ng-if="$ctrl.step.id == \'BRAND\'"\n      on-cancel="$ctrl.cancel()"\n      on-complete="$ctrl.completeBrand()"></hen-brand-editor>\n  <hen-oauth-editor ng-if="$ctrl.step.id == \'OAUTH\'"\n      on-complete="$ctrl.setUpEnvironment()"\n      on-cancel="$ctrl.cancel()"></hen-oauth-editor>\n  <hen-success-page ng-if="$ctrl.step.id == \'SUCCESS\'"\n      api-title="$ctrl.api.serviceConfig.title"></hen-success-page>\n  <div ng-if="$ctrl.step.id == \'LOADING\'">\n    <hen-header hen-title="{{$ctrl.getApiTitle()}}"></hen-header>\n    <div class="hen-loading-page-content" layout="column">\n      <div flex></div>\n        <div layout="row">\n          <div flex></div>\n            <md-progress-circular md-mode="indeterminate" md-diameter="60" ></md-progress-circular>\n          <div flex></div>\n        </div>\n      <div flex></div>\n    </div>\n  </div>\n  <div ng-if="$ctrl.step.id == \'ERROR\'">\n    <hen-header hen-subtitle="{{$ctrl.errorMessage.title}}" is-error="true"></hen-header>\n    <div class="hen-error-page-content">{{$ctrl.errorMessage.description}}</div>\n    <div class="hen-button-bar">\n      <div layout="row">\n        <div flex></div>\n        <div>\n          <md-button ng-click="$ctrl.cancel()" class="md-primary">\n            Close\n          </md-button>\n        </div>\n      </div>\n    </div>\n  </div>\n'),
a.put("components/henhouse_header/henhouse-header.html",'<md-toolbar class="hen-page-header" layout="row">\n  <div layout="column">\n    <h1 data-test-header-title class="hen-page-header-title md-accent md-subhead">\n      {{$ctrl.henTitle}}\n    </h1>\n    <span flex></span>\n    <h2 data-test-header-subtitle class="hen-page-header-sub-title md-display-1">\n      <md-icon class="hen-warning-icon" ng-if="$ctrl.isError">warning</md-icon>\n      {{$ctrl.henSubtitle}}\n    </h2>\n    <ng-transclude></ng-transclude>\n  </div>\n  <span flex></span>\n  <md-button class="md-icon-button md-accent hen-page-close-button"\n      ng-click="$ctrl.flowCtrl.cancel()">\n    <md-icon>\n      close\n    </md-icon>\n  </md-button>\n</md-toolbar>\n'),
a.put("components/oauth_editor/oauth-editor.html",['<hen-header hen-subtitle="'+c("Configure your OAuth client")+'"></hen-header>','<div class="hen-oauth-page-content">\n  <form name="oauthRestrictionForm"\n        novalidate\n        ng-submit="oauthRestrictionForm.$valid && $ctrl.onComplete()">\n    <div class="hen-oauth-details">\n      <div class="hen-oauth-note" ng-if="!$ctrl.selectedClientType">\n        Each OAuth client must be scoped to a specific application environment to prevent it from being abused. Configure those details here to enable your usage.\n      </div>\n\n      <md-input-container md-no-float class="hen-oauth-platform-selector">\n        <md-select required\n          name="platform"\n          ng-model="$ctrl.selectedClientType"',
'          placeholder="'+c("Where are you calling from?")+'"','          ng-change="$ctrl.updateSelectedClientType()">\n          <md-option ng-value="clientType"\n                     ng-repeat="(clientType, clientTypeDetails) in $ctrl.ClientTypeDetails">\n            {{::clientTypeDetails.label}}\n          </md-option>\n        </md-select>\n        <div ng-messages="oauthRestrictionForm.platform.$error" role="alert">\n          <div ng-message="required">\n            This is required\n          </div>\n        </div>\n      </md-input-container>\n\n      <div class="hen-oauth-restriction">\n        <div ng-if="$ctrl.selectedClientType == \'WEB_BROWSER\'">\n          <h5 class="hen-oauth-restriction-header">\n            Authorized Javascript Origin\n          </h5>\n          <div class="hen-oauth-restrictions-description">\n            This is the origin URI of the client application. It can\'t contain a wildcard (http://*.example.com) or a path (http://example.com/subdir). If you\'re using a nonstandard port, you must include it in the origin URI. \n          </div>\n          <md-input-container md-no-float class="md-block">\n            <input required class="hen-oauth-restriction-input"\n                   name="browser"\n                   ng-model="$ctrl.client.postMessageOrigins"\n                   type="url"\n                   placeholder="http://www.example.com">\n            <div ng-messages="oauthRestrictionForm.browser.$error" role="alert">\n              <div ng-message="url">\n                This must be a valid URL\n              </div>\n              <div ng-message="required">\n                This is required\n              </div>\n            </div>\n          </md-input-container>\n        </div>\n        <div ng-if="$ctrl.selectedClientType == \'WEB_SERVER\'">\n          <h5 class="hen-oauth-restriction-header">\n            Authorized redirect URIs\n          </h5>\n          <div class="hen-oauth-restrictions-description">\n            This is the path in your application that users are redirected to after they have authenticated with Google. The path will be appended with the authorization code for access. Must have a protocol. Cannot contain URL fragments or relative paths. Cannot be a public IP address. \n          </div>\n          <md-input-container md-no-float class="md-block">\n            <input required class="hen-oauth-restriction-input"\n              ng-model="$ctrl.client.redirectUris"\n              name="server"\n              type="url"\n              placeholder="http://www.example.com/oauth2callback">\n            <div ng-messages="oauthRestrictionForm.server.$error" role="alert">\n              <div ng-message="url">\n                This must be a valid URL\n              </div>\n              <div ng-message="required">\n                This is required\n              </div>\n            </div>\n          </md-input-container>\n        </div>\n        <div ng-if="$ctrl.selectedClientType == \'ANDROID\'">\n          <h5 class="hen-oauth-restriction-header">\n            Signing-certificate fingerprint\n          </h5>\n          <div class="hen-oauth-restrictions-description">\n            Add your package name and SHA-1 signing-certificate fingerprint to restrict usage to your Android apps. <a class="hen-link" href="{{::$ctrl.ClientTypeDetails[\'ANDROID\'].learnMoreUrl}}" target="_blank">Learn more</a>\n          </div>\n          <div class="hen-oauth-restrictions-description">\n            Get the package name from your AndroidManifest.xml file. Then use the following command to get the fingerprint:\n            <div>\n              <code class="hen-fingerprint-cmd">\n                keytool -exportcert -keystore path-to-debug-or-production-keystore -list -v\n              </code>\n            </div>\n          </div>\n          <md-input-container md-no-float class="md-block">\n            <input required class="hen-oauth-restriction-input"\n                   name="android"\n                   ng-model="$ctrl.client.nativeAppInfo.androidInfo.androidCertificateHash"\n                   ng-pattern="$ctrl.validators.ANDROID_SHA1_FINGERPRINT"\n                placeholder="12:34:56:78:90:AB:CD:EF:12:34:56:78:90:AB:CD:EF:AA:BB:CC:DD">\n            <div ng-messages="oauthRestrictionForm.android.$error">\n              <div ng-message="pattern">\n                Invalid SHA-1 certificate fingerprint\n              </div>\n              <div ng-message="required">\n                This is required\n              </div>\n            </div>\n          </md-input-container>\n        </div>\n        <div ng-if="$ctrl.selectedClientType == \'CHROME\'">\n          <h5 class="hen-oauth-restriction-header">\n            Application ID\n          </h5>\n          <div class="hen-oauth-restrictions-description">\n            The application ID appears in the URL of any dashboard or store page for your app. For example, the URL <code class="hen-oauth-url-example"> https://chrome.google.com/extensions/detail/foo?hl=en </code> has the app ID <code class="hen-oauth-url-example">foo</code>. \n          </div>\n          <md-input-container md-no-float class="md-block">\n            <input required class="hen-oauth-restriction-input"\n                ng-pattern="$ctrl.validators.CHROME_APP_ID"\n                name="chrome"\n                ng-model="$ctrl.client.nativeAppInfo.chromeInfo.extensionOrigin">\n            <div ng-messages="oauthRestrictionForm.chrome.$error">\n              <div ng-message="pattern">\n                The Chrome application ID should consist of 32 lowercase letters\n              </div>\n              <div ng-message="required">\n                This is required\n              </div>\n            </div>\n          </md-input-container>\n        </div>\n        <div ng-if="$ctrl.selectedClientType == \'IOS\'">\n          <h5 class="hen-oauth-restriction-header">\n            Bundle ID\n          </h5>\n          <div class="hen-oauth-restrictions-description">\n            The application\'s Bundle ID is the bundle identifier as listed in the app\'s .plist file. For example: <code>com.example.myapp</code>. \n          </div>\n          <md-input-container md-no-float class="md-block">\n            <input required class="hen-oauth-restriction-input"\n                ng-pattern="$ctrl.validators.IOS_BUNDLE_NAME"\n                name="ios"\n                ng-model="$ctrl.client.nativeAppInfo.iosInfo.iosBundleId">\n            <div ng-messages="oauthRestrictionForm.ios.$error">\n              <div ng-message="pattern">\n                Must be a valid iOS bundle ID\n              </div>\n              <div ng-message="required">\n                This is required\n              </div>\n            </div>\n          </md-input-container>\n        </div>\n      </div>\n    </div>\n    <div class="hen-button-bar">\n      <div layout="row">\n        <div flex></div>\n        <div>\n          <md-button ng-click="$ctrl.onCancel()">\n            Cancel\n          </md-button>\n          <md-button type="submit" class="md-primary">\n            Create\n          </md-button>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n'].join("\n")),
a.put("components/project_selector/project-selector.html",['<md-select id="hen-project-select"\n           data-test-project-select\n           class="hen-project-selector md-accent"\n           md-container-class="hen-project-selector-container"\n           ng-model="$ctrl.projectSelectorDetails.project"','           placeholder="'+c("Select or create project")+'"','           ng-if="$ctrl.projectSelectorDetails.state == \'EXISTING_PROJECT\'"\n           ng-change="$ctrl.handleProjectChange()">\n  <md-option class="hen-project-selector-option"\n             ng-repeat="project in $ctrl.projects"\n             ng-value="project">\n    {{project.name}}\n  </md-option>\n  <md-divider></md-divider>\n  <md-option class="hen-project-selector-option" ng-value="$ctrl.NEW_PROJECT">\n    <span class="hen-project-selector-create-project">\n      + Create a new project\n    </span>\n  </md-option>\n</md-select>\n<md-input-container class="hen-project-create"\n    ng-if="$ctrl.projectSelectorDetails.state == \'NEW_PROJECT\'">\n  <form ng-submit="$ctrl.onSubmit()">\n    <label id="hen-project-create-label">\n      Enter new project name\n    </label>\n    <input\n        id="hen-project-create-input"\n        data-test-project-create-input\n        ng-model="$ctrl.projectSelectorDetails.createProjectLabel"\n        ng-model-options="{ updateOn: \'default blur\', debounce: { default: 1000, blur: 0 } }">\n  </form>\n</md-input-container>\n'].join("\n")),
a.put("components/success_page/success-page.html",['<hen-header hen-subtitle="'+c("You're all set!")+'">','</hen-header>\n<div class="hen-success-page-content">\n  <div class="hen-success-page-content-main-text">{{$ctrl.getApiConfirmationText()}}</div>\n  <div ng-if="$ctrl.credentialType == $ctrl.CredentialType.API_KEY">\n    <div class="api-key-bar-heading">\n      YOUR API KEY\n    </div>\n    <api-key-bar key="::$ctrl.apiKey" show-api-key-name="false"></api-key-bar>\n    <hen-message type="info">\n      To improve your app\'s security, restrict this key\'s usage in the <a class="hen-link" ng-href="{{::$ctrl.credentialLink}}" target="_blank">API Console</a>.\n    </hen-message>\n  </div>\n  <div ng-if="$ctrl.credentialType == $ctrl.CredentialType.OAUTH">\n    <div class="hen-oauth-download">\n      <md-button ng-href="{{::$ctrl.getClientFile()}}"\n                 download="{{::$ctrl.getClientFileName()}}"\n                 class="md-raised md-primary">\n        Download client configuration</md-button>\n    </div>\n    <div class="hen-oauth-client-details">\n      <div>\n        <div class="hen-oauth-client-label">\n          Client ID\n        </div>\n        <div class="hen-oauth-client-value">{{$ctrl.client.clientId}}</div>\n      </div>\n      <div class="hen-oauth-client-secret" ng-if="::$ctrl.hasClientSecret()">\n        <div class="hen-oauth-client-label">\n          Client Secret\n        </div>\n        <div class="hen-oauth-client-value">{{$ctrl.client.clientSecret}}</div>\n      </div>\n    </div>\n    <hen-message type="info">\n      You can always manage your API credentials and usage later in the <a class="hen-link" ng-href="{{::$ctrl.consoleLink}}" target="_blank">API Console</a>.\n    </hen-message>\n  </div>\n  <hen-message type="info" ng-if="$ctrl.credentialType == $ctrl.CredentialType.NO_AUTH">\n    To monitor API usage or manage project quota, use the <a ng-href="{{::$ctrl.consoleLink}}" target="_blank">API Console</a>.\n  </hen-message>\n</div>\n<div class="hen-button-bar">\n  <md-button class="md-primary" ng-click="$ctrl.closeDialog()">\n    Finish\n  </md-button>\n</div>\n'].join("\n")),
a.put("components/tos_opt_in/tos-opt-in.html",'<div class="hen-opt-in-text">\n  I agree that my use of any <a href="https://console.developers.google.com/terms" target="_blank"> services and related APIs</a> is subject to compliance with the applicable <a href="https://console.developers.google.com/terms" target="_blank">Terms of Service</a>. \n</div>\n<md-radio-group ng-model="$ctrl.isAccepted" class="md-primary">\n  <md-radio-button ng-value="$ctrl.OptInStatus.ACCEPTED" data-test-accept-tos>\n    Yes\n  </md-radio-button>\n  <md-radio-button ng-value="$ctrl.OptInStatus.DECLINED">\n    No\n  </md-radio-button>\n</md-radio-group>\n'))}]);var ma=function(a,b,c){this.u=a;this.na=b;this.o=c;this.U=c.document};ma.prototype.clickToCopyKey=function(){var a=this.na[0].querySelector(".api-key-bar-api-key");this.o.getSelection().removeAllRanges();var b=this.U.createRange();b.selectNodeContents(a);this.o.getSelection().addRange(b);this.U.execCommand("copy");this.o.getSelection().removeAllRanges();z(this.u.m,"event","ClickToCopy")};ma.$inject=["analytics","$element","$window"];
var na={templateUrl:"components/api_key_bar/api-key-bar.html",bindings:{key:"<",showApiKeyName:"<"},controller:ma};var A=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};y(A,Error);A.prototype.name="CustomError";var oa=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")},wa=function(a){if(!pa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(qa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ra,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(sa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ta,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(ua,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(va,"&#0;"));return a},qa=/&/g,ra=/</g,
sa=/>/g,ta=/"/g,ua=/'/g,va=/\x00/g,pa=/[\x00&<>"']/;var B=function(a,b){b.unshift(a);A.call(this,oa.apply(null,b));b.shift()};y(B,A);B.prototype.name="AssertionError";
var xa=function(a,b,c,d){var e="Assertion failed";if(c)var e=e+(": "+c),g=d;else a&&(e+=": "+a,g=b);throw new B(""+e,g||[]);},C=function(a,b,c){a||xa("",null,b,Array.prototype.slice.call(arguments,2));return a},D=function(a,b){throw new B("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));},E=function(a,b,c){w(a)||xa("Expected string but got %s: %s.",[u(a),a],b,Array.prototype.slice.call(arguments,2))},ya=function(a,b,c){v(a)||xa("Expected array but got %s: %s.",[u(a),a],b,Array.prototype.slice.call(arguments,
2));return a};var za=Array.prototype.indexOf?function(a,b,c){C(null!=a.length);return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(w(a))return w(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Aa=Array.prototype.map?function(a,b,c){C(null!=a.length);return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=w(a)?a.split(""):a,k=0;k<d;k++)k in g&&(e[k]=b.call(c,g[k],k,a));return e},Ba=function(a){return Array.prototype.concat.apply([],
arguments)},Ca=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]},Da=function(a){for(var b={},c=0,d=0;d<a.length;){var e=a[d++],g;g=e;var k=typeof g;g="object"==k&&null!=g||"function"==k?"o"+(g[ja]||(g[ja]=++ka)):(typeof g).charAt(0)+g;Object.prototype.hasOwnProperty.call(b,g)||(b[g]=!0,a[c++]=e)}a.length=c};var Fa=function(a){var b=Ea,c;for(c in b)if(!a.call(void 0,b[c],c,b))return!1;return!0},Ha=function(){var a=Ga,b=[],c=0,d;for(d in a)b[c++]=a[d];return b},Ia=function(a,b){var c,d=b;c=u(d);d=(c="array"==c||"object"==c&&"number"==typeof d.length)?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],void 0!==a);c++);return a},Ka=function(a){var b=Ja;a:{for(var c in b)if(a.call(void 0,b[c],c,b)){a=c;break a}a=void 0}return a&&b[a]},La=function(a){var b=arguments.length;if(1==b&&v(arguments[0]))return La.apply(null,
arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var F=function(){},Ma="function"==typeof Uint8Array,Na=function(a,b,c){a.h=null;b||(b=[]);a.Ga=void 0;a.F=-1;a.i=b;a:{if(a.i.length){b=a.i.length-1;var d=a.i[b];if(d&&"object"==typeof d&&!v(d)&&!(Ma&&d instanceof Uint8Array)){a.H=b-a.F;a.j=d;break a}}a.H=Number.MAX_VALUE}a.Da={};if(c)for(b=0;b<c.length;b++)d=c[b],d<a.H?(d+=a.F,a.i[d]=a.i[d]||G):a.j[d]=a.j[d]||G},G=Object.freeze?Object.freeze([]):[],H=function(a,b){if(b<a.H){b+=a.F;var c=a.i[b];return c===G?a.i[b]=[]:c}c=a.j[b];return c===G?a.j[b]=
[]:c},I=function(a,b,c){a=H(a,b);return null==a?c:a},J=function(a,b,c){b<a.H?a.i[b+a.F]=c:a.j[b]=c},Pa=function(a){if(a.h)for(var b in a.h){var c=a.h[b];if(v(c))for(var d=0;d<c.length;d++)c[d]&&Oa(c[d]);else c&&Oa(c)}},Oa=function(a){Pa(a);return a.i};F.prototype.toString=function(){Pa(this);return this.i.toString()};
F.prototype.getExtension=function(a){if(this.j){this.h||(this.h={});var b=a.Ea;if(a.Fa){if(a.oa())return this.h[b]||(this.h[b]=Aa(this.j[b]||[],function(b){return new a.ma(b)})),this.h[b]}else if(a.oa())return!this.h[b]&&this.j[b]&&(this.h[b]=new a.ma(this.j[b])),this.h[b];return this.j[b]}};F.prototype.clone=function(){return new this.constructor(Qa(Oa(this)))};
var Qa=function(a){var b;if(v(a)){for(var c=Array(a.length),d=0;d<a.length;d++)null!=(b=a[d])&&(c[d]="object"==typeof b?Qa(b):b);return c}if(Ma&&a instanceof Uint8Array)return new Uint8Array(a);c={};for(d in a)null!=(b=a[d])&&(c[d]="object"==typeof b?Qa(b):b);return c};var Ra=function(a){Na(this,a,null)};y(Ra,F);var Sa=function(a){var b=new Ra;J(b,1,a);return b};Ra.prototype.setApiKey=function(a){J(this,4,a);return this};var Ua=function(a){Na(this,a,Ta)};y(Ua,F);var Ta=[4,7],Va={API_KEY:0,OAUTH:1,NO_AUTH:2};var Wa=function(a,b,c,d,e){C(0<a,"Initial value must be greater than zero.");C(b>=a,"Max value should be at least as large as initial value.");void 0!==c&&C(0<=c&&1>=c,"Randomness factor should be between 0 and 1.");void 0!==d&&C(1<d,"Backoff factor should be greater than 1");void 0!==e&&C(1<=e,"Decay factor should be greater than 1");this.V=a;this.W=b;this.A=this.G=a;this.ca=c||0;this.ja=d||2};Wa.prototype.reset=function(){this.A=this.G=this.V};
var Ya=function(a){a.A=Math.min(a.W,a.A*a.ja);a.G=Math.min(a.W,a.A+(a.ca?Math.round(a.ca*(Math.random()-.5)*2*a.A):0))};var Za=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,$a=function(a){return a?decodeURI(a):a},ab=/#|$/;var bb=function(a){this.m=a};bb.$inject=["embeddingPage"];var cb=function(a,b,c,d){this.c=a;this.I=b;this.f=c;this.b={root:C(H(d,1))}},db=function(a,b){return a.f.request({path:"/v1/services/"+encodeURIComponent(b)},a.b)},fb=function(a,b,c){return a.f.request({path:"/v1/services:activate",method:"POST",body:{consumerProjectId:c.projectId,serviceNames:b}},a.b).then(function(b){var c=new Wa(1E3,1E4,.5,1.5);return eb(a,b,c)})},eb=function(a,b,c){if(b.error)return a.c.reject(b);if(b.metadata&&b.metadata.persisted||b.done)return a.c.when(b);var d=c.G;Ya(c);return a.I(function(){return a.f.request({path:"/v1/"+
b.name},a.b).then(function(b){return eb(a,b,c)})},d)};cb.$inject=["$q","$timeout","gapiClient","backends"];var gb={},K=Sa("https://test-servicemanagement.sandbox.googleapis.com");J(K,2,"https://test-apikeys-googleapis.sandbox.google.com");J(K,3,"https://test-cloudresourcemanager.sandbox.googleapis.com");J(K,6,"https://test-clientauthconfig-googleapis.sandbox.google.com");J(K,5,"https://test-tos-pa.sandbox.googleapis.com");J(K,7,"https://dev-people-pa.corp.googleapis.com");gb[0]=K.setApiKey("ANVavNKM_iFH3gTXsIAqHnGSrvwtic_FjHbe6hY");var L=Sa("https://servicemanagement.googleapis.com");J(L,2,"https://apikeys.googleapis.com");
J(L,3,"https://cloudresourcemanager.googleapis.com");J(L,6,"https://clientauthconfig.googleapis.com");J(L,5,"https://tos-pa.googleapis.com");J(L,7,"https://people-pa.googleapis.com");var hb=(gb[1]=L.setApiKey("AIzaSyD-nhJADgF50b3VFd0BVfOPZqrEpuJQHxQ"),gb),ib=function(a){return hb[I(a,3,1)]};ib.$inject=["config"];var jb=function(a){a=a.location.href;var b=a.search(ab),c;b:{for(c=0;0<=(c=a.indexOf("pb",c))&&c<b;){var d=a.charCodeAt(c-1);if(38==d||63==d)if(d=a.charCodeAt(c+2),!d||61==d||38==d||35==d)break b;c+=3}c=-1}if(0>c)a=null;else{d=a.indexOf("&",c);if(0>d||d>b)d=b;c+=3;a=decodeURIComponent(a.substr(c,d-c).replace(/\+/g," "))}if(!a)throw Error("Required pb parameter");try{var e=ya(JSON.parse(a));return new Ua(e)}catch(g){throw Error("Invalid pb parameter: '"+a+"'");}};jb.$inject=["$window"];var kb=function(a){this.credentialType=I(a,10,0);this.S={};this.ka={authType:"SHARED_SECRET",type:"TYPE_UNSPECIFIED",displayName:"OAuth client"};this.la="CREATE"};
f.Object.defineProperties(kb.prototype,{apiKey:{configurable:!0,enumerable:!0,get:function(){C(0==this.credentialType);return this.K},set:function(a){C(0==this.credentialType);this.K=a}},brand:{configurable:!0,enumerable:!0,get:function(){C(1==this.credentialType);return this.S},set:function(a){C(1==this.credentialType);this.S=a}},client:{configurable:!0,enumerable:!0,get:function(){C(1==this.credentialType);return this.ka}}});kb.$inject=["config"];var lb="https://devsite.googleplex.com https://developers.google.com https://cloud-dot-devsite.googleplex.com https://cloud.google.com https://console.cloud.google.com https://console.developers.google.com".split(" "),mb=[".corp.google.com"],nb=function(a){a=a.toLowerCase();var b=$a(a.match(Za)[3]||null)||"";return lb.some(function(b){return a==b})||mb.some(function(a){var c=b.length-a.length;return 0<=c&&b.indexOf(a,c)==c})},ob=function(a,b){this.o=a;this.b=b;this.P="";a=H(this.b,5)||"";nb(a)?this.P=
a:console.error("Henhouse widget is not whitelisted for this origin: "+a)},M=function(a,b){b=[I(a.b,1,"")].concat(b);a.P&&a.o.parent.postMessage(b,a.P)},pb=function(a,b,c,d){d&&void 0!=d.da&&(b+="_"+(d.da?"TOS":"NO_TOS"));M(a,["loaded",c,600,b])},z=function(a,b,c){M(a,["analytics",b,c])};ob.$inject=["$window","config"];var rb=function(a){(H(a,6)||"").split(",").map(function(a){return Ka(function(b){return b==a})}).filter(function(a){return void 0!=a})};rb.$inject=["config"];var Ja={xa:"EXISTING_KEYS",ya:"IAM"};var N=function(a,b,c,d){this.c=a;this.sa=b;this.o=c;this.K=H(d,4)};N.prototype.request=function(a,b){return sb(this).then(function(){return tb(a,b)})};
var tb=function(a,b){return gapi.client.request({root:b.root,path:a.path,params:a.params||{},method:a.method||"GET",body:JSON.stringify(a.body||"")}).then(function(a){return a.result})},sb=function(a){if(!a.M){a.M=a.c.defer();a.o.onGapiClientLoaded=a.qa.bind(a);var b=document.createElement("script");b.src="https://apis.google.com/js/client.js?onload=onGapiClientLoaded";document.body.appendChild(b)}return a.M.promise};
N.prototype.qa=function(){gapi.config.update("googleapis.config/auth/useFirstPartyAuth",!0);gapi.config.update("googleapis.config/auth/useFirstPartyAuthV2",!0);gapi.client.setApiKey(this.K);this.M.resolve();this.sa.$evalAsync()};N.$inject=["$q","$rootScope","$window","backends"];var ub=function(a,b){this.f=a;this.b={root:C(H(b,2))}},vb=function(a,b){E(b.projectId);return a.f.request({path:"/v1/projects/"+encodeURIComponent(b.projectId)+"/apiKeys",method:"POST",body:{displayName:"API key"}},a.b)};ub.$inject=["gapiClient","backends"];var wb=function(a,b,c){this.J=a;this.f=b;this.b={root:C(H(c,6))}},xb=function(a,b){return a.f.request({method:"POST",path:"v1/clients",body:b},a.b)},yb=function(a,b){return a.f.request({method:"GET",path:"v1/brands/"+b.projectNumber},a.b).then(function(a){return v(a)?a:[a]}).catch(function(b){return b&&404==b.status?[]:a.J.reject(b)})},zb=function(a,b,c){b.projectNumbers=[c.projectNumber];return a.f.request({method:"POST",path:"v1/brands",body:b},a.b)};wb.$inject=["$q","gapiClient","backends"];var Ab=function(a,b,c){this.c=a;this.f=b;this.b={root:C(H(c,5))}},Bb=function(a,b){return a.f.request({path:"/v1/user/0/acceptances:batchInsert",method:"post",body:{tos_versions:b.map(function(a){return{tos_id:a.ta,version:a.version}})}},a.b)},Cb=function(a){return a.serviceConfig&&a.serviceConfig.usage&&a.serviceConfig.usage.requirements?a.serviceConfig.usage.requirements.filter(function(a){return 0==a.lastIndexOf("serviceusage.googleapis.com/tos/",0)}).map(function(a){return a.substring(32)}):[]},
Eb=function(a,b){b=Db.concat(Cb(b));Da(b);return a.f.request({path:"/v1/user/0/required",params:{tos_ids:b}},a.b).then(function(a){return(a.missing||[]).map(function(a){return{ta:a.tos.tosId,version:a.tos.version}})})};Ab.$inject=["$q","gapiClient","backends"];var Db=["pantheon","cloud"];var Fb=function(a,b,c,d){this.c=a;this.I=b;this.f=c;this.b={root:C(H(d,3))};this.ba=this.f.request({path:"/v1/projects"},this.b).then(function(a){return a.projects||[]}).then(function(a){return a.filter(function(a){return"ACTIVE"==a.lifecycleState})})},Ib=function(a,b){return a.f.request({path:"v1/projects",method:"POST",body:{name:b,projectId:Gb(b)}},a.b).then(function(b){return a.I(function(){return Hb(a,b,new Wa(1E3,1E4,.5,1.1))},5E3)}).then(function(a){return a.response})},Hb=function(a,b,c){if(b.error)return a.c.reject(b);
if(b.done)return a.c.when(b);var d=c.G;Ya(c);return a.I(function(){return a.f.request({path:"/v1/"+b.name},a.b).then(function(b){return Hb(a,b,c)})},d)},Jb=function(a,b){return a.f.request({path:"/v1/projects/"+b.projectId+":testIamPermissions",method:"POST",body:{permissions:Ha()}},a.b).then(function(a){return La(a.permissions)})},Gb=function(a){a=a.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-]/g,"");var b="-"+Date.now();30<(a+b).length&&(a=a.substr(0,30-b.length));return a+b};
Fb.$inject=["$q","$timeout","gapiClient","backends"];var Ga={va:"servicemanagement.apiKeys.create",za:"servicemanagement.apiKeys.list",Aa:"servicemanagement.projectSettings.get",wa:"servicemanagement.services.bind"},Ea=La(Ha());var Kb=function(a,b){this.c=a;this.v=b;this.T="My Project";this.state="NOT_YET_SELECTED";this.aa=a.when(Ea)},Lb=function(a){return"EXISTING_PROJECT"!=a.state||""==a.O?a.c.when(!0):a.aa.then(function(a){return Fa(function(b,d){return!!a[d]})})};
f.Object.defineProperties(Kb.prototype,{project:{configurable:!0,enumerable:!0,get:function(){C("EXISTING_PROJECT"==this.state);return this.O},set:function(a){C("EXISTING_PROJECT"==this.state);this.aa=(this.O=a)?Jb(this.v,C(this.O)):this.c.when(Ea)}},createProjectLabel:{configurable:!0,enumerable:!0,get:function(){C("NEW_PROJECT"==this.state);return this.T},set:function(a){C("NEW_PROJECT"==this.state);this.T=a}}});Kb.$inject=["$q","projectService"];var Mb=function(a,b,c){this.J=a;this.f=b;this.b={root:C(H(c,7))}};Mb.prototype.getEmail=function(){var a=this;return this.f.request({method:"GET",path:"/v2/people?person_id=me"},this.b).then(function(b){return Ia(b,"personResponse",0,"person","email",0,"value")||a.J.reject("Could not retrieve email")})};Mb.$inject=["$q","gapiClient","backends"];var Nb=angular.module("henhouse.services.module",[]).service("apiService",cb).service("analytics",bb).service("credentialDetails",kb).service("embeddingPage",ob).service("flagService",rb).service("gapiClient",N).service("keyService",ub).service("oAuthService",wb).service("projectSelectorDetails",Kb).service("projectService",Fb).service("tosService",Ab).service("userService",Mb).factory("backends",ib).factory("config",jb);var Ob=function(a,b){var c=this;this.brand=a.brand;this.pageIsLoading=!0;b.getEmail().then(function(a){c.email=a;c.brand.supportEmail=a;c.pageIsLoading=!1})};Ob.$inject=["credentialDetails","userService"];var Pb={controller:Ob,templateUrl:"components/brand_editor/brand-editor.html",bindings:{onCancel:"&",onComplete:"&"}};var Qb=function(a,b){var c=this;this.projects=[];this.projectSelectorDetails=b;this.NEW_PROJECT={};this.v=a;this.v.ba.then(function(a){0==a.length?c.projectSelectorDetails.state="NEW_PROJECT":(c.projectSelectorDetails.state="EXISTING_PROJECT",c.projects=a,c.projects.sort(function(a,b){return(a.name||"").localeCompare(b.name||"")}))})};Qb.prototype.handleProjectChange=function(){this.projectSelectorDetails.project==this.NEW_PROJECT&&(this.projectSelectorDetails.state="NEW_PROJECT")};
Qb.$inject=["projectService","projectSelectorDetails"];var Rb={controller:Qb,bindings:{onSubmit:"&"},templateUrl:"components/project_selector/project-selector.html"};var Sb={ERROR:{iconName:"warning",className:"hen-error-icon"},INFO:{iconName:"info_outline",className:"hen-info-icon"}},Tb=function(){};Tb.prototype.$onInit=function(){E(this.type);this.iconDetails=Sb[this.type.toUpperCase()]};var Ub={controller:Tb,bindings:{type:"@"},templateUrl:"components/hen_message/hen-message.html",transclude:!0};var Vb={Ba:"UNRESPONDED",ACCEPTED:"ACCEPTED",DECLINED:"DECLINED"};var Wb={id:"UNDEFINED",l:0},Xb={id:"INTRO",l:225},Yb={id:"LOADING",l:300},Zb={id:"BRAND",l:360},$b={id:"OAUTH",l:475},ac={id:"SUCCESS",l:440},bc={id:"ERROR",l:285},cc={title:"Couldn't create project",description:""},dc={title:"Something went wrong.",description:"Something went wrong. Please try again"},P=function(a,b,c,d,e,g,k,qb,rc,sc,U,Xa){var h=this;this.b=e;this.OptInStatus=Vb;this.u=c;this.R=d;this.m=k;this.pa=qb;this.N=rc;this.v=sc;this.c=a;this.ua=Xa;this.w=g;this.L=I(this.b,10,0);this.errorMessage=
dc;this.C=[];this.projectSelectorDetails=U;this.step=Wb;this.tosAccepted="UNRESPONDED";this.userProbablyHasPermission=!0;b.$watch(function(){return[U.state,"EXISTING_PROJECT"==U.state&&U.project]},function(){return ec(h)},!0);c=db(this.R,I(this.b,2,"")).then(function(a){return h.api=a}).then(function(a){return Eb(Xa,a)}).then(function(a){return h.C=a});a.all([c,this.v.ba]).then(function(){0==h.C.length&&(h.tosAccepted="ACCEPTED");O(h,Xb);pb(k,"/henhouse/"+h.step.id,h.step.l,{da:h.isTosVisible()})}).catch(function(){O(h,
bc);pb(k,"/henhouse/"+h.step.id,h.step.l)});b.$watch(function(){var a=0;if(h.step==Xb)h.isTosVisible()&&(a+=145),h.projectLabelIsValid()||(a+=50),h.userProbablyHasPermission||(a=50);else if(h.step==ac)switch(h.L){case 1:a=60;break;case 2:a=-100}return h.step.l+a},function(a){M(k,["resize",a,600])})};P.prototype.getApiTitle=function(){return I(this.b,9,"")?I(this.b,9,""):this.api&&this.api.serviceConfig&&this.api.serviceConfig.title?"Enable "+this.api.serviceConfig.title:"Enable API"};
var fc=function(a){return 0==a.C.length?a.c.when({}):"ACCEPTED"!=a.tosAccepted?a.c.reject("Terms of Serivce must be explicitly accepted."):Bb(a.ua,a.C).catch(function(){return Q(a)})},gc=function(a){return"ACCEPTED"!=a.tosAccepted?a.c.reject("Terms of Serivce must be explicitly accepted."):Ib(a.v,a.projectSelectorDetails.createProjectLabel).catch(function(){return Q(a,cc)})},hc=function(a){C(a.projectSelectorDetails.project);return fb(a.R,Ba(I(a.b,2,""),H(a.b,7)),a.projectSelectorDetails.project).catch(function(){return Q(a)})},
ic=function(a){switch(a.projectSelectorDetails.state){case "NEW_PROJECT":return z(a.u.m,"event","StartCreateNewProject"),gc(a).then(function(b){a.projectSelectorDetails.state="EXISTING_PROJECT";return a.projectSelectorDetails.project=b});case "EXISTING_PROJECT":if(!a.projectSelectorDetails.project)return a.c.reject("No project was selected");z(a.u.m,"event","UseExistingProject");return a.c.when(a.projectSelectorDetails.project);default:return a.c.reject("Cannot get project when the project selector is not yet initialized.")}};
P.prototype.projectLabelIsValid=function(){if("NEW_PROJECT"!=this.projectSelectorDetails.state)return!0;var a=this.projectSelectorDetails.createProjectLabel;return 4<=a.length&&30>=a.length&&!!a.match(/^[a-zA-Z0-9-'" !]+$/)};P.prototype.isValidForFlow=function(){return this.userProbablyHasPermission&&this.tosAccepted==this.OptInStatus.ACCEPTED&&("EXISTING_PROJECT"==this.projectSelectorDetails.state&&!!this.projectSelectorDetails.project||"NEW_PROJECT"==this.projectSelectorDetails.state&&this.projectLabelIsValid())};
P.prototype.completeBrand=function(){O(this,$b)};P.prototype.completeIntro=function(){switch(this.L){case 1:jc(this);break;case 0:case 2:this.setUpEnvironment();break;default:Q(this)}};
var jc=function(a){switch(a.projectSelectorDetails.state){case "NEW_PROJECT":O(a,Zb);break;case "EXISTING_PROJECT":O(a,Yb);C(a.projectSelectorDetails.project);yb(a.N,a.projectSelectorDetails.project).then(function(b){0==b.length?O(a,Zb):(a.w.brand=b[0],O(a,$b))}).catch(function(){return Q(a)});break;default:Q(a)}},kc=function(a){C(a.projectSelectorDetails.project);var b=a.projectSelectorDetails.project;switch(a.L){case 0:return vb(a.pa,b).then(function(b){return a.w.apiKey=b});case 1:var c=a.w.brand;
return(c.brandId?a.c.when(c):zb(a.N,c,b)).then(function(c){var d=a.w.client;d.brandId=c.brandId;d.projectNumber=b.projectNumber;return xb(a.N,d).then(function(a){return angular.extend(d,a)})}).catch(function(){return Q(a)});case 2:return a.c.when(void 0);default:return a.c.reject()}};
P.prototype.setUpEnvironment=function(){var a=this;if(this.isValidForFlow())switch(O(this,Yb),this.w.la){case "CREATE":fc(this).then(function(){return ic(a)}).then(function(){return a.c.all([hc(a),kc(a)])}).then(function(){return O(a,ac)}).catch(function(){return Q(a)})}};P.prototype.cancel=function(){M(this.m,["cancel"])};
var O=function(a,b){a.step=b;b=b.id;a.step==Xb&&(b+="_"+(a.isTosVisible()?"TOS":"NO_TOS"));z(a.u.m,"virtualPageView","/henhouse/"+b)},Q=function(a,b){a.step!=bc&&(a.errorMessage=b||dc,O(a,bc));return a.c.reject()};P.prototype.isTosVisible=function(){return 0<this.C.length};var ec=function(a){a.userProbablyHasPermission=!0;Lb(a.projectSelectorDetails).then(function(b){a.userProbablyHasPermission=b})};P.$inject="$q $scope analytics apiService config credentialDetails embeddingPage keyService oAuthService projectService projectSelectorDetails tosService".split(" ");
var lc={controller:P,templateUrl:"components/henhouse_flow/henhouse-flow.html"};var mc={ANDROID_SHA1_FINGERPRINT:/^([0-9a-fA-F]{2}:){19}([0-9a-fA-F]){2}$/,CHROME_APP_ID:/^[a-z]{32}$/,IOS_BUNDLE_NAME:/^[-a-zA-Z0-9_\-.]+$/},R={},nc=(R.WEB_BROWSER={label:"Web browser",clientType:"WEB"},R.WEB_SERVER={label:"Web server",clientType:"WEB"},R.ANDROID={label:"Android",learnMoreUrl:"https://support.google.com/googleapi/answer/6158849?hl=en#installedapplications&android",clientType:"NATIVE_ANDROID"},R.CHROME={label:"Chrome app",learnMoreUrl:"https://support.google.com/googleapi/answer/6158849?hl=en#installedapplications&chrome",
clientType:"NATIVE_CHROME_EXTENSION"},R.IOS={label:"iOS",learnMoreUrl:"https://support.google.com/googleapi/answer/6158849?hl=en#installedapplications&ios",clientType:"NATIVE_IOS"},R.PS4={label:"Playstation 4",clientType:"NATIVE_SONY"},R),S=function(a){this.ClientTypeDetails=nc;this.client=a.client;this.validators=mc};S.prototype.updateSelectedClientType=function(){this.client.type=this.ClientTypeDetails[this.selectedClientType].clientType};S.prototype.updateSelectedClientType=S.prototype.updateSelectedClientType;
S.$inject=["credentialDetails"];var oc={controller:S,templateUrl:"components/oauth_editor/oauth-editor.html",bindings:{onCancel:"&",onComplete:"&"}};var T=function(a,b,c,d,e){this.u=a;this.m=d;this.ra=e;this.b=b;this.credentialType=c.credentialType;this.CredentialType=Va;0==this.credentialType?this.apiKey=C(c.apiKey):1==this.credentialType&&(this.client=C(c.client));a=e.project?"?project="+e.project.projectId:"";b=0==this.credentialType?"/apis/credentials/key/"+this.apiKey.keyId:"";this.consoleLink="https://console.developers.google.com"+a;this.credentialLink="https://console.developers.google.com"+b+a};
T.prototype.closeDialog=function(){M(this.m,["cancel"])};T.prototype.getApiConfirmationText=function(){return this.apiTitle&&!I(this.b,9,"")?"You're ready to start developing with "+this.apiTitle:"You're ready to start developing!"};T.prototype.getClientFileName=function(){return"NATIVE_IOS"==this.client.type?"credentials.plist":"credentials.json"};
T.prototype.getClientFile=function(){var a;if("NATIVE_IOS"==this.client.type){a=this.client;C("NATIVE_IOS"==a.type,"The client must be an iOS client.");E(a.clientId);E(a.nativeAppInfo.iosInfo.iosBundleId);var b='<?xml version="1.0" encoding="UTF-8"?>\n    <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"\n    "http://www.apple.com/DTDs/PropertyList-1.0.dtd">\n    <plist version="1.0">\n    <dict>\n      <key>CLIENT_ID</key>\n      <string>{CLIENT_ID}</string>\n      <key>REVERSED_CLIENT_ID</key>\n      <string>{REVERSED_CLIENT_ID}</string>\n      <key>PLIST_VERSION</key>\n      <string>1</string>\n      <key>BUNDLE_ID</key>\n      <string>{BUNDLE_ID}</string>\n    </dict>\n    </plist>'.replace("{CLIENT_ID}",
wa(a.clientId)),c=a.clientId.split(".").reverse().join("."),b=b.replace("{REVERSED_CLIENT_ID}",wa(c));a=b=b.replace("{BUNDLE_ID}",wa(a.nativeAppInfo.iosInfo.iosBundleId))}else a=this.client,b={client_id:a.clientId,project_id:this.ra.project.projectId,auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://accounts.google.com/o/oauth2/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs"},this.hasClientSecret()&&(b.client_secret=a.clientSecret),c=pc(this),
0<c.length&&(b.redirect_uris=c),a.postMessageOrigins&&0<a.postMessageOrigins.length&&(b.javascript_origins=a.postMessageOrigins),c={},"WEB"==a.type?c.web=b:c.installed=b,a=JSON.stringify(c);return"data:attachment/json;charset=utf-8,"+encodeURIComponent(String(a))};
var pc=function(a){a=a.client;var b=["urn:ietf:wg:oauth:2.0:oob","http://localhost"],c=Ca(a.redirectUris||[]);"NATIVE_ANDROID"!=a.type&&"NATIVE_IOS"!=a.type&&"NATIVE_DEVICE"!=a.type&&"NATIVE_SONY"!=a.type&&"NATIVE_APPLICATION"!=a.type||b.forEach(function(a){0<=za(c,a)||c.push(a)});return c};T.prototype.hasClientSecret=function(){var a=this.client;return 1==this.credentialType&&!!a.clientSecret&&("WEB"==a.type||"NATIVE_DEVICE"==a.type||"NATIVE_SONY"==a.type||"NATIVE_APPLICATION"==a.type)};
T.$inject=["analytics","config","credentialDetails","embeddingPage","projectSelectorDetails"];var qc={controller:T,bindings:{apiTitle:"<"},templateUrl:"components/success_page/success-page.html"};var tc=angular.module("henhouse.components.module",["ngAnimate","ngMessages",Nb.name]).component("apiKeyBar",na).component("henBrandEditor",Pb).component("henFlow",lc).component("henHeader",{bindings:{henSubtitle:"@",henTitle:"@",isError:"="},require:{flowCtrl:"^henFlow"},transclude:!0,templateUrl:"components/henhouse_header/henhouse-header.html"}).component("henMessage",Ub).component("henOauthEditor",oc).component("henProjectSelector",Rb).component("henSuccessPage",qc).component("henTosOptIn",{controller:function(){return{OptInStatus:Vb}},
bindings:{isAccepted:"="},templateUrl:"components/tos_opt_in/tos-opt-in.html"}),uc=function(a){return a.aHrefSanitizationWhitelist(/^\s*(https?:|data:attachment\/json;)/)};uc.$inject=["$compileProvider"];tc.config(uc);var V=function(){this.X="";this.fa=vc};V.prototype.B=!0;var vc={};V.prototype.toString=function(){return"SafeScript{"+this.X+"}"};var wc=function(a){if(a instanceof V&&a.constructor===V&&a.fa===vc)return a.X;D("expected object of type SafeScript, got '"+a+"' of type "+u(a));return"type_error:SafeScript"};var W=function(){this.Y="";this.ga=xc};W.prototype.B=!0;var xc={};W.prototype.toString=function(){return"SafeStyle{"+this.Y+"}"};var yc=function(a){if(a instanceof W&&a.constructor===W&&a.ga===xc)return a.Y;D("expected object of type SafeStyle, got '"+a+"' of type "+u(a));return"type_error:SafeStyle"};var X=function(){this.Z="";this.ia=zc};X.prototype.B=!0;X.prototype.toString=function(){return"TrustedResourceUrl{"+this.Z+"}"};var Ac=function(a){if(a instanceof X&&a.constructor===X&&a.ia===zc)return a.Z;D("expected object of type TrustedResourceUrl, got '"+a+"' of type "+u(a));return"type_error:TrustedResourceUrl"},zc={};var Y=function(){this.D="";this.ha=Bc};Y.prototype.B=!0;Y.prototype.toString=function(){return"SafeUrl{"+this.D+"}"};var Cc=function(a){if(a instanceof Y&&a.constructor===Y&&a.ha===Bc)return a.D;D("expected object of type SafeUrl, got '"+a+"' of type "+u(a));return"type_error:SafeUrl"},Bc={};var Z=function(){this.D="";this.ea=Dc};Z.prototype.B=!0;Z.prototype.toString=function(){return"SafeHtml{"+this.D+"}"};var Ec=function(a){if(a instanceof Z&&a.constructor===Z&&a.ea===Dc)return a.D;D("expected object of type SafeHtml, got '"+a+"' of type "+u(a));return"type_error:SafeHtml"},Dc={};x("ng.safehtml.googSceHelper.isGoogHtmlType",function(a){return a&&a.B?!0:!1});x("ng.safehtml.googSceHelper.isCOMPILED",function(){return!0});x("ng.safehtml.googSceHelper.unwrapAny",function(a){if(a instanceof X)return Ac(a);if(a instanceof Z)return Ec(a);if(a instanceof Y)return Cc(a);if(a instanceof W)return yc(a);if(a instanceof V)return wc(a);throw Error();});
x("ng.safehtml.googSceHelper.unwrapGivenContext",function(a,b){if("html"==a)return Ec(b);if("resourceUrl"==a||"templateUrl"==a)return Ac(b);if("url"==a)return b instanceof X?Ac(b):Cc(b);if("css"==a)return yc(b);if("js"==a)return wc(b);throw Error();});var Fc=function(a){a.definePalette("henBlue",a.extendPalette("blue",{500:"4285F4"}));a.definePalette("henAccents",a.extendPalette("grey",{A200:"A1C2FA"}));a.theme("default").primaryPalette("henBlue").accentPalette("henAccents",{"hue-2":"600"})};Fc.$inject=["$mdThemingProvider"];angular.module("henhouse",[tc.name,la.name,"ngMaterial"]).config(Fc);
